jQuery(function(e){let r=0;e(document).on("attx.updated",function(){window.addEventListener("message",t=>{if("https://calendly.com"===t.origin&&t.data.event&&0===t.data.event.indexOf("calendly.")&&(t=localStorage.getItem("attx"))){t=(t=JSON.parse(t))[t.length-1];if(r)return!1;let e="";var a=jQuery("iframe[src*='calendly.com/']").attr("src");e=a,t.hasOwnProperty("utm_source")&&(e=updateQueryStringParameter(e,"utm_source",t.utm_source)),t.hasOwnProperty("utm_medium")&&(e=updateQueryStringParameter(e,"utm_medium",t.utm_medium)),t.hasOwnProperty("utm_campaign")&&(e=updateQueryStringParameter(e,"utm_campaign",t.utm_campaign)),t.hasOwnProperty("utm_content")&&(e=updateQueryStringParameter(e,"utm_content",t.utm_content)),t.hasOwnProperty("utm_term")&&(e=updateQueryStringParameter(e,"utm_term",t.utm_term)),jQuery("iframe[src*='calendly.com/']").attr("src",e),r=1}},!1)}),e(document).on("attx.no_params",function(){window.addEventListener("message",t=>{if("https://calendly.com"===t.origin&&t.data.event&&0===t.data.event.indexOf("calendly.")){t={},t=addDefaultParams(t);if(r)return!1;let e="";var a=jQuery("iframe[src*='calendly.com/']").attr("src");e=a,t.hasOwnProperty("ref")&&(e=updateQueryStringParameter(e,"utm_source",t.ref)),t.hasOwnProperty("source")&&(e=updateQueryStringParameter(e,"utm_medium",t.source)),t.hasOwnProperty("path")&&(e=updateQueryStringParameter(e,"utm_campaign",t.path)),jQuery("iframe[src*='calendly.com/']").attr("src",e),r=1}},!1)})}),jQuery(function(t){t(document).on("attx.updated attx.no_params",function(e){t("[name=gform_submit]").after("<input type='hidden' name='attx' value='"+localStorage.getItem("attx")+"' />")})}),window.updateQueryStringParameter=function(e,t,a){var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),n=-1!==e.indexOf("?")?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+a+"$2"):e+n+t+"="+a},window.addDefaultParams=function(e){var t=new URLSearchParams(window.location.search);return e.time=(new Date).toUTCString(),e.path=location.pathname,e.ref=encodeURIComponent(document.referrer)||"direct",t.has("gclid")?e.source="Google Ads":t.has("fbclid")?e.source="Meta Ads":t.has("tduid")?e.source="Tradedoubler":-1!==e.ref.indexOf("google")?e.source="Google":-1!==e.ref.indexOf("instagram")&&(e.source="Instagram"),e},jQuery(function(a){if(sessionStorage.getItem("attx_updated"))a(document).trigger("attx.updated");else{let t={};const r=new URLSearchParams(window.location.search);if(["utm_id","utm_source","utm_medium","utm_campaign","utm_term","utm_content","gclid","fbclid","tduid"].forEach(e=>{r.has(e)&&(t[e]=r.get(e))}),Object.keys(t).length){t=addDefaultParams(t);let e=localStorage.getItem("attx");(e=e?JSON.parse(e):[]).push(t),localStorage.setItem("attx",JSON.stringify(e)),sessionStorage.setItem("attx_updated",1),a(document).trigger("attx.updated")}else a(document).trigger("attx.no_params")}});