jQuery(function(t){let r=0;t(document).on("attx.updated",function(){window.addEventListener("message",e=>{if("https://calendly.com"===e.origin&&e.data.event&&0===e.data.event.indexOf("calendly.")&&(e=localStorage.getItem("attx"))){e=(e=JSON.parse(e))[e.length-1];if(r)return!1;let t="";var a=jQuery("iframe[src*='calendly.com/']").attr("src");t=a,e.hasOwnProperty("utm_source")&&(t=updateQueryStringParameter(t,"utm_source",e.utm_source)),e.hasOwnProperty("utm_medium")&&(t=updateQueryStringParameter(t,"utm_medium",e.utm_medium)),e.hasOwnProperty("utm_campaign")&&(t=updateQueryStringParameter(t,"utm_campaign",e.utm_campaign)),e.hasOwnProperty("utm_content")&&(t=updateQueryStringParameter(t,"utm_content",e.utm_content)),e.hasOwnProperty("utm_term")&&(t=updateQueryStringParameter(t,"utm_term",e.utm_term)),jQuery("iframe[src*='calendly.com/']").attr("src",t),r=1}},!1)}),t(document).on("attx.no_params",function(){window.addEventListener("message",e=>{if("https://calendly.com"===e.origin&&e.data.event&&0===e.data.event.indexOf("calendly.")){e={},e=addDefaultParams(e);if(r)return!1;let t="";var a=jQuery("iframe[src*='calendly.com/']").attr("src");t=a,e.hasOwnProperty("ref")&&(t=updateQueryStringParameter(t,"utm_source",e.ref)),e.hasOwnProperty("source")&&(t=updateQueryStringParameter(t,"utm_medium",e.source)),e.hasOwnProperty("path")&&(t=updateQueryStringParameter(t,"utm_campaign",e.path)),jQuery("iframe[src*='calendly.com/']").attr("src",t),r=1}},!1)})}),jQuery(function(r){r(document).on("attx.updated attx.no_params",function(t){if(sessionStorage.getItem("attx_db_updated"))return!1;let e={};if("updated"===t.namespace){var a=localStorage.getItem("attx");if(!a)return!1;a=JSON.parse(a),e=a[a.length-1]}else"no_params"===t.namespace&&(e=addDefaultParams(e));r.post(attx.ajax_url,{action:"save_to_db",security:attx.nonce,host:location.hostname,attributions:e},function(t){JSON.parse(t).success&&sessionStorage.setItem("attx_db_updated",1)})})}),jQuery(function(e){e(document).on("attx.updated attx.no_params",function(t){e("[name=gform_submit]").after("<input type='hidden' name='attx' value='"+localStorage.getItem("attx")+"' />")})}),window.updateQueryStringParameter=function(t,e,a){var r=new RegExp("([?&])"+e+"=.*?(&|$)","i"),n=-1!==t.indexOf("?")?"&":"?";return t.match(r)?t.replace(r,"$1"+e+"="+a+"$2"):t+n+e+"="+a},window.addDefaultParams=function(t){var e=new URLSearchParams(window.location.search);return t.time=(new Date).toUTCString(),t.path=location.pathname,t.ref=encodeURIComponent(document.referrer)||"direct",e.has("gclid")?t.source="Google Ads":e.has("fbclid")?t.source="Meta Ads":e.has("tduid")?t.source="Tradedoubler":-1!==t.ref.indexOf("google")?t.source="Google":-1!==t.ref.indexOf("instagram")&&(t.source="Instagram"),t},jQuery(function(a){if(sessionStorage.getItem("attx_updated"))a(document).trigger("attx.updated");else{let e={};const r=new URLSearchParams(window.location.search);if(["utm_id","utm_source","utm_medium","utm_campaign","utm_term","utm_content","gclid","fbclid","tduid"].forEach(t=>{r.has(t)&&(e[t]=r.get(t))}),Object.keys(e).length){e=addDefaultParams(e);let t=localStorage.getItem("attx");(t=t?JSON.parse(t):[]).push(e),localStorage.setItem("attx",JSON.stringify(t)),sessionStorage.setItem("attx_updated",1),a(document).trigger("attx.updated")}else a(document).trigger("attx.no_params")}});